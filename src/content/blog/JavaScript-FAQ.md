---
author: Simon Smale
pubDatetime: 2024-04-01T20:40:08Z
modDatetime: 2024-04-08T18:59:05Z
title: JavaScriptå¸¸è§æ‰‹å†™é¢˜
featured: false
draft: false
tags:
  - docs
  - FAQ
  - JavaScript
canonicalURL: https://smale.codes/posts/setting-dates-via-git-hooks/
description: Compilation of Common Handwritten Questions in JavaScript
---

è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å¯¹JavaScripté¢è¯•å¸¸è§æ‰‹å†™é¢˜çš„æ•´ç†

## ç›®å½•
- [é˜²æŠ–](#é˜²æŠ–)
- [èŠ‚æµ](#èŠ‚æµ)
- [æ·±æµ…æ‹·è´](#æ·±æµ…æ‹·è´)
- [åŸç”ŸAJAX](#åŸç”Ÿajax)
- [æ•°ç»„å»é‡](#æ•°ç»„å»é‡)
- [æ•°ç»„æ‰å¹³åŒ–](#æ•°ç»„æ‰å¹³åŒ–)

## é˜²æŠ–

é˜²æŠ–(debounce)æ˜¯åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚

çœ‹ä¸€ä¸ªğŸŒ°ï¼ˆæ —å­ï¼‰ï¼š
```js
//æ¨¡æ‹Ÿä¸€æ®µajaxè¯·æ±‚
function ajax(content) {
  console.log('ajax request ' + content)
}

let inputa = document.getElementById('unDebounce')

inputa.addEventListener('keyup', function (e) {
    ajax(e.target.value)
})
```
å¦‚æœæ˜¯è¿™æ ·å†™çš„è¯ï¼Œæ¯å½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡`ajax`è¯·æ±‚ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œç”¨æˆ·è¾“å…¥å®Œåï¼Œå†è§¦å‘ä¸€æ¬¡`ajax`è¯·æ±‚ã€‚è¿™æ ·å¯ä»¥å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚

é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š
```js
<input type="text" id="inp">
  <script>
      const inp = document.getElementById('inp');
      function debounce(fn, delay) {
          let time = null
          return function () {
              if (time) {
                  clearTimeout(time)
              }
              time = setTimeout(() => {
                  fn()
              }, delay)
          }
      }
      inp.addEventListener('input', debounce(function () {
          console.log(inp.value)
      }, 1000))
  </script>
```
æˆ‘ä»¬åŠ å…¥äº†é˜²æŠ–ä»¥åï¼Œå½“ä½ åœ¨é¢‘ç¹çš„è¾“å…¥æ—¶ï¼Œå¹¶ä¸ä¼šå»è§¦å‘æ‰“å°ï¼Œåªæœ‰å½“ä½ åœ¨æŒ‡å®šé—´éš”å†…æ²¡æœ‰è¾“å…¥æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå‡½æ•°ã€‚å¦‚æœåœæ­¢è¾“å…¥ä½†æ˜¯åœ¨æŒ‡å®šé—´éš”å†…åˆè¾“å…¥ï¼Œä¼šé‡æ–°è§¦å‘è®¡æ—¶ã€‚

## èŠ‚æµ

è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚

å½“ç”¨æˆ·åœ¨ç½‘é¡µä¸Šæ»šåŠ¨æ—¶è§¦å‘çš„äº‹ä»¶æ˜¯ä¸€ä¸ªéœ€è¦èŠ‚æµçš„ä¾‹å­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰èŠ‚æµï¼Œæ»šåŠ¨äº‹ä»¶å¯èƒ½ä¼šé¢‘ç¹åœ°è§¦å‘ï¼Œå¯¼è‡´æµè§ˆå™¨æ‰§è¡Œè¿‡å¤šçš„å¤„ç†å·¥ä½œï¼Œå½±å“é¡µé¢çš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚é€šè¿‡èŠ‚æµï¼Œå¯ä»¥é™åˆ¶æ»šåŠ¨äº‹ä»¶çš„è§¦å‘é¢‘ç‡ï¼Œä»¥å‡å°‘æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œæé«˜é¡µé¢çš„æ€§èƒ½ã€‚

é’ˆå¯¹ä¸Šè¿°éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š
```js
// èŠ‚æµå‡½æ•°
function throttle(func, delay) {
  let timeoutId;
  return function(...args) {
    if (!timeoutId) {
      timeoutId = setTimeout(() => {
        func.apply(this, args);
        timeoutId = null;
      }, delay);
    }
  };
}

// å¤„ç†æ»šåŠ¨äº‹ä»¶çš„å‡½æ•°
function handleScroll() {
  console.log("é¡µé¢æ­£åœ¨æ»šåŠ¨...");
  // åœ¨è¿™é‡Œæ‰§è¡Œæ»šåŠ¨äº‹ä»¶çš„å¤„ç†é€»è¾‘
}

// ä½¿ç”¨èŠ‚æµå‡½æ•°åŒ…è£…å¤„ç†æ»šåŠ¨äº‹ä»¶çš„å‡½æ•°
const throttledScroll = throttle(handleScroll, 1000); // è¿™é‡Œçš„1000æ˜¯å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’

// æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨
window.addEventListener("scroll", throttledScroll);
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªèŠ‚æµå‡½æ•°`throttle`ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå»¶è¿Ÿæ—¶é—´ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚è¿™ä¸ªæ–°å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ä¼šæ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ä¸€ä¸ªå®šæ—¶å™¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥è°ƒç”¨åŸå§‹å‡½æ•°ï¼Œå¹¶åœ¨å»¶è¿Ÿæ—¶é—´åå°†å®šæ—¶å™¨æ ‡è¯†é‡ç½®ä¸º`null`ã€‚å¦‚æœåœ¨å»¶è¿Ÿæ—¶é—´å†…å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œç›´åˆ°å»¶è¿Ÿæ—¶é—´è¿‡å»ï¼Œå®šæ—¶å™¨è¢«é‡ç½®ã€‚æ‰€ä»¥å½“ç”¨æˆ·åœ¨æ»šåŠ¨äº‹ä»¶ä¸­é¢‘ç¹è§¦å‘æ—¶ï¼Œåªæœ‰å½“å»¶è¿Ÿæ—¶é—´è¿‡å»åæ‰ä¼šæ‰§è¡Œå‡½æ•°ã€‚

#### é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«

é˜²æŠ–å’ŒèŠ‚æµéƒ½æ˜¯ç”¨æ¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡çš„ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼Œé˜²æŠ–æ˜¯åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚è€ŒèŠ‚æµæ˜¯åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åæ‰æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™å¿½ç•¥ã€‚

#### ç»“åˆåº”ç”¨åœºæ™¯

é˜²æŠ–

`search`æœç´¢ç”¨æˆ·åœ¨ä¸æ–­è¾“å…¥å€¼æ—¶ï¼Œç”¨é˜²æŠ–æ¥èŠ‚çº¦è¯·æ±‚èµ„æºã€‚
`window`è§¦å‘`resize`çš„æ—¶å€™ï¼Œä¸æ–­çš„è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ä¼šä¸æ–­çš„è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œç”¨é˜²æŠ–æ¥è®©å…¶åªè§¦å‘ä¸€æ¬¡


èŠ‚æµ

é¼ æ ‡ä¸æ–­ç‚¹å‡»è§¦å‘ï¼Œ`mousedown`(å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡)
ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œç”¨`throttle`æ¥åˆ¤æ–­



## æ·±æµ…æ‹·è´

- æµ…æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚
   
- æ·±æ‹·è´ï¼šå°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥,ä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡,ä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚

#### æµ…æ‹·è´çš„å®ç°æ–¹å¼ï¼š

- Object.assign()
  
`Object.assign()`æ–¹æ³•å¯ä»¥æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡ã€‚

```js
let obj1 = { person: {name: "kobe", age: 41},sports:'basketball' };
let obj2 = Object.assign({}, obj1);
obj2.person.name = "wade";
obj2.sports = 'football'
console.log(obj1); // { person: { name: 'wade', age: 41 }, sports: 'basketball' }
```

- å±•å¼€è¿ç®—ç¬¦

å±•å¼€è¿ç®—ç¬¦æ˜¯ä¸€ä¸ª es6 / es2015ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§éå¸¸æ–¹ä¾¿çš„æ–¹å¼æ¥æ‰§è¡Œæµ…æ‹·è´ï¼Œè¿™ä¸`Object.assign()`çš„åŠŸèƒ½ç›¸åŒã€‚

```js
let obj1 = { name: 'Kobe', address:{x:100,y:100}}
let obj2= {... obj1}
obj1.address.x = 200;
obj1.name = 'wade'
console.log('obj2',obj2) // obj2 { name: 'Kobe', address: { x: 200, y: 100 } }
```

- å‡½æ•°åº“lodashçš„_.cloneæ–¹æ³•

è¯¥å‡½æ•°åº“ä¹Ÿæœ‰æä¾›_.cloneç”¨æ¥åš Shallow Copy,åé¢æˆ‘ä»¬ä¼šå†ä»‹ç»åˆ©ç”¨è¿™ä¸ªåº“å®ç°æ·±æ‹·è´ã€‚

```js
var _ = require('lodash');
var obj1 = {
    a: 1,
    b: { f: { g: 1 } },
    c: [1, 2, 3]
};
var obj2 = _.clone(obj1);
console.log(obj1.b.f === obj2.b.f);// true
```

- Array.prototype.concat()

```js
let arr = [1, 3, {
    username: 'kobe'
    }];
let arr2 = arr.concat();    
arr2[2].username = 'wade';
console.log(arr); //[ 1, 3, { username: 'wade' } ]
```

- Array.prototype.slice()

```js
let arr = [1, 3, {
    username: ' kobe'
    }];
let arr3 = arr.slice();
arr3[2].username = 'wade'
console.log(arr); // [ 1, 3, { username: 'wade' } ]
```

#### æ·±æ‹·è´çš„å®ç°æ–¹å¼ï¼š

- JSON.parse(JSON.stringify())
  
```js
let arr = [1, 3, {
    username: ' kobe'
}];
let arr4 = JSON.parse(JSON.stringify(arr));
arr4[2].username = 'duncan'; 
console.log(arr, arr4)

```
è¿™æ˜¯åˆ©ç”¨`JSON.stringify`å°†å¯¹è±¡è½¬æˆ`JSON`å­—ç¬¦ä¸²ï¼Œå†ç”¨`JSON.parse`æŠŠå­—ç¬¦ä¸²è§£ææˆå¯¹è±¡ï¼Œä¸€å»ä¸€æ¥ï¼Œæ–°çš„å¯¹è±¡äº§ç”Ÿäº†ï¼Œè€Œä¸”å¯¹è±¡ä¼šå¼€è¾Ÿæ–°çš„æ ˆï¼Œå®ç°æ·±æ‹·è´ã€‚

- å‡½æ•°åº“lodashçš„_.cloneDeepæ–¹æ³•

```js
var _ = require('lodash');
var obj1 = {
    a: 1,
    b: { f: { g: 1 } },
    c: [1, 2, 3]
};
var obj2 = _.cloneDeep(obj1);
console.log(obj1.b.f === obj2.b.f);// false
```

- æ‰‹å†™é€’å½’æ–¹æ³•

é€’å½’æ–¹æ³•å®ç°æ·±åº¦å…‹éš†åŸç†ï¼šéå†å¯¹è±¡ã€æ•°ç»„ç›´åˆ°é‡Œè¾¹éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå†å»å¤åˆ¶ï¼Œå°±æ˜¯æ·±åº¦æ‹·è´ã€‚

```js
function deepCopy(obj) {
    if (typeof obj !== 'object' || obj === null) return
    let objCopy = obj instanceof Array ? [] : {}
    for (let key in obj){
        if(obj.hasOwnProperty(key)){
            if (obj[key] instanceof Object) {
                objCopy[key] = deepCopy(obj[key])
            } else{
                objCopy[key] = obj[key]
            }
        }
    }
    return objCopy
}
```

## åŸç”Ÿajax

`AJAX`å…¨ç§°ä¸ºâ€œAsynchronous JavaScript and XMLâ€ï¼ˆå¼‚æ­¥JavaScriptå’Œ XMLï¼‰ï¼Œæ˜¯ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼Œ`Ajax`å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚è€Œä¼ ç»Ÿçš„ç½‘é¡µ(ä¸ä½¿ç”¨ Ajax)å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…éœ€é‡è½½æ•´ä¸ªç½‘é¡µé¢ã€‚

#### AJAXçš„å·¥ä½œåŸç†

`Ajax`çš„å·¥ä½œåŸç†ç›¸å½“äºåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ äº†ä¸€ä¸ªä¸­é—´å±‚(AJAXå¼•æ“)ï¼Œä½¿ç”¨æˆ·æ“ä½œä¸æœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œè¯·æ±‚äº¤ç»™`xhr`ï¼Œ`xhr`æŠŠè¯·æ±‚æäº¤ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼ŒæœåŠ¡å™¨å“åº”æ•°æ®äº¤ç»™`xhr`å¯¹è±¡ï¼Œ`xhr`å¯¹è±¡æ¥æ”¶æ•°æ®ï¼Œç”±`javascript`æŠŠæ•°æ®å†™åˆ°é¡µé¢ä¸Šã€‚


#### AJAXè¯·æ±‚çš„äº”ä¸ªæ­¥éª¤

- å»ºç«‹`XMLHttpRequest`å¯¹è±¡;
  
```js
const xhr = new XMLHttpRequest();
```

- è®¾ç½®å›è°ƒå‡½æ•°;

```js
xhr.onreadystatechange = callbackï¼›
```

- é…ç½®è¯·æ±‚ä¿¡æ¯ï¼Œ(å¦‚open,getæ–¹æ³•)ï¼Œä½¿ç”¨`open`æ–¹æ³•ä¸æœåŠ¡å™¨å»ºç«‹é“¾æ¥;
  
```js
// get æ–¹å¼
xhr.open("get", "test.php", true)

// post æ–¹å¼å‘é€æ•°æ® éœ€è¦è®¾ç½®è¯·æ±‚å¤´
xhr.open("post", "test.php", true)
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
```

- å‘æœåŠ¡å™¨å‘é€æ•°æ®;

```js

// get ä¸éœ€è¦ä¼ é€’å‚æ•°
xhr.send(null)
// post éœ€è¦ä¼ é€’å‚æ•°
xhr.send("name=jay&age=18")
```

- åœ¨å›è°ƒå‡½æ•°ä¸­é’ˆå¯¹ä¸åŒçš„å“åº”çŠ¶æ€è¿›è¡Œå¤„ç†;

```js
function callback() {
  // åˆ¤æ–­å¼‚æ­¥å¯¹è±¡çš„çŠ¶æ€
  if(xhr.readyState == 4) {
    // åˆ¤æ–­äº¤äº’æ˜¯å¦æˆåŠŸ
    if(xhr.status == 200) {
      // è·å–æœåŠ¡å™¨å“åº”çš„æ•°æ®
      var res = xhr.responseText
      // è§£ææ•°æ®
      res = JSON.parse(res)
    }
  }
}
```
#### ajaxä¸­çš„äº”ç§çŠ¶æ€ç 

- 0ï¼šè¯·æ±‚æœªåˆå§‹åŒ–

- 1ï¼šæœåŠ¡å™¨è¿æ¥å·²å»ºç«‹(å·²è°ƒç”¨openæ–¹æ³•ï¼Œä½†è¿˜æœªè°ƒç”¨send)

- 2ï¼šè¯·æ±‚å·²æ¥æ”¶(å·²è°ƒç”¨sendæ–¹æ³•)

- 3ï¼šè¯·æ±‚å¤„ç†ä¸­(è¯·æ±‚å·²åˆ°è¾¾æœåŠ¡ç«¯ï¼Œæ­£åœ¨å¤„ç†)

- 4ï¼šè¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª

- çŠ¶æ€ï¼š 200â€”â€”æ­£ç¡®ã€404â€”â€”æœªæ‰¾åˆ°é¡µé¢ã€500â€”â€”é”™è¯¯

#### AJAXè¯·æ±‚æˆåŠŸå’Œå¤±è´¥åˆ¤æ–­

- `ajax` çš„ `success` å’Œ `error` æ–¹æ³•æ ¹æ®å“åº”çŠ¶æ€ç æ¥è§¦å‘ã€‚  
- å½“ `XMLHttpRequest.status` ä¸º 200 çš„æ—¶å€™ï¼Œè¡¨ç¤ºå“åº”æˆåŠŸï¼Œæ­¤æ—¶è§¦å‘ `success()` å…¶ä»–çŠ¶æ€ç åˆ™è§¦å‘ `error()`ã€‚


## æ•°ç»„å»é‡

å…³äºæ•°ç»„å»é‡æ˜¯åœ¨é¢è¯•ä¸­ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸è¢«ä½¿ç”¨çš„ï¼Œè¿™é‡Œæˆ‘è¯¦ç»†æ€»ç»“äº†7ç§æ•°ç»„å»é‡çš„æ–¹å¼ã€‚

- åˆ©ç”¨`Set()` + `...`å±•å¼€è¿ç®—ç¬¦å®ç°å»é‡

`Set`å¯¹è±¡ï¼šæ˜¯å€¼çš„é›†åˆï¼Œä½ å¯ä»¥æŒ‰ç…§æ’å…¥çš„é¡ºåºè¿­ä»£å®ƒçš„å…ƒç´ ã€‚ `Set`ä¸­çš„å…ƒç´ åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œå³`Setä¸­`çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚
`...`å±•å¼€è¿ç®—ç¬¦ï¼šæ˜¯es6æ–°å¢çš„è¯­æ³•ï¼Œå¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ å±•å¼€ã€‚

```js
let arr = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5];
let arr1 = [...new Set(arr)];
console.log(arr1)
```

æ³¨æ„ï¼šä»¥ä¸Šå»æ–¹å¼å¯¹`NaN`å’Œ`undefined`ç±»å‹å»é‡ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œæ˜¯å› ä¸º`NaN`å’Œ`undefined`éƒ½å¯ä»¥è¢«å­˜å‚¨åœ¨`Set`ä¸­ã€‚

- åˆ©ç”¨æ•°ç»„çš„`indexOf`æ–¹æ³•

`indexOf()` æ–¹æ³•ç”¨äºæŸ¥æ‰¾æ•°ç»„ä¸­æŸä¸ªå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ç´¢å¼•ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œç„¶åè¿”å›è¯¥å…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®ã€‚å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œåˆ™è¿”å› -1ã€‚

å…·ä½“æ€è·¯ï¼šæ–°å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œéå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œå°†æ•°ç»„å…ƒç´ å­˜å…¥æ–°æ•°ç»„ä¸­ï¼Œå­˜æ”¾å‰åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å·²ç»å«æœ‰å½“å‰å…ƒç´ ï¼Œæ²¡æœ‰åˆ™å­˜å…¥ã€‚æ­¤æ–¹æ³•ä¹Ÿæ— æ³•å¯¹`NaN`å»é‡ã€‚


```js
function removeDuplicate(arr) {
  const newArr = []
  arr.forEach(item => {
    if (newArr.indexOf(item) === -1) {
      newArr.push(item)
    }
  })
  return newArr // è¿”å›ä¸€ä¸ªæ–°æ•°ç»„
}

const result = removeDuplicate(arr)
console.log(result) 
```

- åˆ©ç”¨æ•°ç»„çš„`includes`æ–¹æ³•

`includes()`æ–¹æ³•ï¼šç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

å…·ä½“æ€è·¯ï¼šé€»è¾‘ä¸indexOfæ–¹æ³•å»é‡å¼‚æ›²åŒå·¥ï¼Œåªæ˜¯ç”¨`includes`æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦åŒ…å«é‡å¤å…ƒç´ ã€‚

```js
function removeDuplicate(arr) {
  const newArr = []
  arr.forEach(item => {
    if (!newArr.includes(item)) {
      newArr.push(item)
    }
  })
  return newArr
}

const result = removeDuplicate(arr)
console.log(result)

```


- åˆ©ç”¨æ•°ç»„çš„`filter()` + `indexOf()`

`filter()` æ–¹æ³•ï¼šä¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚

å…·ä½“æ€è·¯ï¼š`filter`æ–¹æ³•ä¼šå¯¹æ»¡è¶³æ¡ä»¶çš„å…ƒç´ å­˜æ”¾åˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œç»“åˆ`indexOf`æ–¹æ³•è¿›è¡Œåˆ¤æ–­ã€‚

```js
function removeDuplicate(arr) {
  return arr.filter((item, index) => {
    return arr.indexOf(item) === index
  })
}

const result = removeDuplicate(arr)
console.log(result)

```

- åˆ©ç”¨`Map()`

`Map` å¯¹è±¡ï¼šç”¨äºä¿å­˜é”®å€¼å¯¹ï¼Œå¹¶ä¸”èƒ½å¤Ÿè®°ä½é”®çš„åŸå§‹æ’å…¥é¡ºåºã€‚ä»»ä½•å€¼ï¼ˆå¯¹è±¡æˆ–è€…åŸå§‹å€¼ï¼‰éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªé”®æˆ–ä¸€ä¸ªå€¼ã€‚

å®ç°æ€è·¯ï¼š`Map`å¯¹è±¡æ˜¯ JavaScript æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç»“æ„ä¸ºé”®å€¼å¯¹å½¢å¼ï¼Œå°†æ•°ç»„å…ƒç´ ä½œä¸º`map`çš„é”®å­˜å…¥ï¼Œç„¶åç»“åˆ`has()`å’Œ`set()`æ–¹æ³•åˆ¤æ–­é”®æ˜¯å¦é‡å¤ã€‚

```js
function removeDuplicate(arr) {
  const map = new Map()
  const newArr = []

  arr.forEach(item => {
    if (!map.has(item)) { // has()ç”¨äºåˆ¤æ–­mapæ˜¯å¦åŒ…ä¸ºitemçš„å±æ€§å€¼
      map.set(item, true) // ä½¿ç”¨set()å°†itemè®¾ç½®åˆ°mapä¸­ï¼Œå¹¶è®¾ç½®å…¶å±æ€§å€¼ä¸ºtrue
      newArr.push(item)
    }
  })

  return newArr
}

const result = removeDuplicate(arr)
console.log(result)
```

- åˆ©ç”¨å¯¹è±¡

å…¶å®ç°æ€æƒ³å’ŒMap()æ˜¯å·®ä¸å¤šçš„ï¼Œä¸»è¦æ˜¯åˆ©ç”¨äº†å¯¹è±¡çš„å±æ€§åä¸å¯é‡å¤è¿™ä¸€ç‰¹æ€§ã€‚

```js

function removeDuplicate(arr) {
  const newArr = []
  const obj = {}

  arr.forEach(item => {
    if (!obj[item]) {
      newArr.push(item)
      obj[item] = true
    }
  })

  return newArr
}

const result = removeDuplicate(arr)
console.log(result)
```


## æ•°ç»„æ‰å¹³åŒ–


æ•°ç»„æ‰å¹³åŒ–ä¹Ÿæ˜¯é¢è¯•ä¸­çš„å¸¸è€ƒç‚¹ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·æ€»ç»“ä¸€ä¸‹çŸ¥è¯†ç‚¹ä»¥åŠå®ç°æ–¹æ³•å§ã€‚

JavaScript ä¸­çš„æ•°ç»„æ‰å¹³åŒ–æ˜¯æŒ‡å°†å¤šç»´æ•°ç»„ï¼ˆåŒ…å«åµŒå¥—æ•°ç»„ï¼‰è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„çš„è¿‡ç¨‹ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–æ•°ç»„çš„ç»“æ„ï¼Œä½¿å¾—æ“ä½œæ›´åŠ æ–¹ä¾¿å’Œçµæ´»ã€‚

#### å…·ä½“çš„å®ç°æ–¹æ³•ï¼š

- æ™®é€šé€’å½’æ–¹æ³•

å®ç°æ€è·¯ï¼šä½¿ç”¨é€’å½’å‡½æ•°ï¼Œé€šè¿‡éå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœæ˜¯ï¼Œåˆ™å¯¹å­æ•°ç»„è¿›è¡ŒåŒæ ·çš„æ‰å¹³åŒ–æ“ä½œï¼Œå¹¶å°†ç»“æœåˆå¹¶åˆ°æœ€ç»ˆçš„ä¸€ç»´æ•°ç»„ä¸­ã€‚

```js
let arr = [1,2,[3,4,[5,6]]]

function flattenArray(arr) {
  let result = []
  for (let i = 0; i < arr.length; i++) {
    if (Array.isArray(arr[i])) {
      result = result.concat(flattenArray(arr[i]));
    } else {
      result.push(arr[i])
    }
  }
  return result
}

console.log(flattenArray(arr));  // [ 1, 2, 3, 4, 5, 6 ]
```

-  `reduce()` æ–¹æ³•

å®ç°æ€è·¯ï¼šåˆ©ç”¨`Array.prototype.reduce()`å‡½æ•°çš„ç´¯åŠ å™¨ç‰¹æ€§ï¼Œéå†æ•°ç»„å¹¶å°†å­æ•°ç»„æ‰å¹³åŒ–åçš„ç»“æœåˆå¹¶åˆ°æœ€ç»ˆçš„ä¸€ç»´æ•°ç»„ä¸­ã€‚å…¶å®ä¹Ÿæ˜¯é€’å½’ï¼Œä¸è¿‡ä¸åƒä¸Šé¢ä¸€æ ·ç”¨`for`å¾ªç¯ï¼Œå’Œä¸Šé¢ä»£ç å·®åˆ«ä¸å¤§ï¼Œè¿™é‡Œä¸»è¦æ˜¯åˆ©ç”¨äº†`reduce`æ–¹æ³•ï¼Œä»£ç ä¹¦å†™èµ·æ¥æ›´ç®€æ´ã€‚

```js
let arr = [1,2,[3,4,[5,6,[7,8]]]]

function flattenWithReduce(arr) {
  return arr.reduce((acc, val) => 
    acc.concat(Array.isArray(val) ? flattenWithReduce(val) : [val]),
    []
  );
}

console.log(flattenWithReduce(arr))
```

ä¼˜ç‚¹ï¼šå¯è¯»æ€§å¼ºï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— éœ€é¢å¤–åˆ›å»ºå‡½æ•°é—­åŒ…ã€‚ ç¼ºç‚¹ï¼šå¯¹äºéå¸¸æ·±çš„åµŒå¥—ç»“æ„ï¼Œæ€§èƒ½å¯èƒ½ä¸å¦‚ä½¿ç”¨`flat()`æ–¹æ³•ã€‚

- Array.prototype.flat()

ES6 å¼•å…¥äº†`flat()`æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰å­æ•°ç»„æ‰å¹³åŒ–ä¸ºä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚å®ƒæ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ‰å¹³åŒ–æ·±åº¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`flat()`æ–¹æ³•å°†æ‰å¹³åŒ–åˆ°æ•°ç»„çš„ä»»æ„æ·±åº¦ã€‚

```js
let arr = [1,2,[3,4,[5,6,[7,8,[9]]]]]

function flattenWithFlat(arr) {
  return arr.flat(Infinity) 
}

console.log(flattenWithFlat(arr)) 

```

ä¼˜ç‚¹ï¼šç®€æ´é«˜æ•ˆï¼ŒåŸç”Ÿæ”¯æŒï¼Œé€‚åˆç°ä»£æµè§ˆå™¨ç¯å¢ƒã€‚ ç¼ºç‚¹ï¼šæ—§ç‰ˆæµè§ˆå™¨ä¸æ”¯æŒæ­¤æ–¹æ³•ï¼Œéœ€è¦`polyfill`æˆ–å…¶ä»–å…¼å®¹æ–¹æ¡ˆã€‚

- æ‰©å±•è¿ç®—ç¬¦ä¸`concat`

å®ç°æ€è·¯ï¼šåˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦`ï¼ˆ...ï¼‰`å’Œ`concat()`ç»“åˆï¼Œé€æ­¥å±•å¼€åµŒå¥—æ•°ç»„ã€‚

```js
let arr = [1,2,[3,[4],[5,6,[7,8,[9]]]]]

function flattenWithSpread(arr) {
  while (arr.some(item => Array.isArray(item))) {
    arr = [].concat(...arr)
  }
  return arr
}

console.log(flattenWithSpread(arr));

```

ä¼˜ç‚¹ï¼šä»£ç ç›¸å¯¹ç®€æ´ï¼Œæ˜“äºç†è§£ã€‚ ç¼ºç‚¹ï¼šå¾ªç¯æ‰§è¡Œæ¬¡æ•°å–å†³äºæ•°ç»„åµŒå¥—æ·±åº¦ï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚

- lodashåº“çš„`_.flattenDeep()`

lodash åº“æä¾›äº†ä¸€ä¸ªç°æˆçš„æ–¹æ³•`_.flattenDeep()`ï¼Œå¯ä»¥å¤„ç†ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„ã€‚

```js

import _ from 'lodash'

let arr = [1,2,[3,[4],[5,6,[7,8,[9]]]]] 

const flattenedArr = _.flattenDeep(nestedArr)

console.log(flattenedArr)

```



